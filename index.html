<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Black White</title>
    <script src="//localhost:8000/dist/phaser-arcade-physics.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
            background: grey;
        }
    </style>
</head>
<body>

<script type="text/javascript">

    var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 200 }
            }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    var game = new Phaser.Game(config);

    // Colors
    var leftColor = 0x000000;
    var rightColor = 0xFFFFFF;
    var backgroundColor = 0x808080;
    var pathLineColor = 0xd5dbdb;
    var pathFillColor = 0xa6acaf;
    // Sizes
    var pathWidth = 8;
    var followerSize = pathWidth * 2;
    // Geometry
    var leftRect;
    var rightRect;
    var pathGraphics;
    // Game objects
    var follower;

    function preload ()
    {

    }

    function create ()
    {
        // White Half
        rightGraphics = this.add.graphics({
            lineStyle: { width: 2, color: rightColor },
            fillStyle: { color: rightColor }
        });
        rightRect = new Phaser.Geom.Rectangle(401,0,400,600);
        rightGraphics.clear();
        rightGraphics.fillRectShape(rightRect);

        // Black Half
        leftGraphics = this.add.graphics({
            lineStyle: { width: 2, color: leftColor },
            fillStyle: { color: leftColor }
        });
        leftRect = new Phaser.Geom.Rectangle(0,0,400,600);
        leftGraphics.clear();
        leftGraphics.fillRectShape(leftRect);

        // Path
        pathGraphics = this.add.graphics({
            lineStyle: { width: pathWidth, color: pathLineColor },
            fillStyle: { color: pathFillColor }
        });
        path = new Phaser.Curves.Path(600, 400);
        path.splineTo([ 200, 400, 300, 550, 400, 450, 500, 550]);
        path.lineTo(700, 300);
        path.lineTo(600, 350);
        path.ellipseTo(200, 100, 100, 200, false, 0);
        path.cubicBezierTo(222, 119, 308, 107, 208, 368);
        path.ellipseTo(60, 60, 0, 360, true);

        // Follower
        follower = { t: 0, vec: new Phaser.Math.Vector2() };
        this.tweens.add({
            targets: follower,
            t: 1,
            ease: 'Sine.easeInOut',
            duration: 4000,
            yoyo: true,
            repeat: -1
        });
    }

    function update ()
    {
        // load point at time into vec
        path.getPoint(follower.t, follower.vec);
        // redraw path
        pathGraphics.clear()
        path.draw(pathGraphics);
        pathGraphics.fillCircle(follower.vec.x, follower.vec.y, followerSize);
    }
</script>

</body>
</html>
